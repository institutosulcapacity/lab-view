<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Laboratório Virtual – Montagem de Circuitos</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  background:#1e1e1e;
  color:#fff;
  font-family:Arial, sans-serif;
  text-align:center;
}

h1{margin:20px}

svg{
  background:#2b2b2b;
  border-radius:12px;
}

.componente{
  fill:#555;
  stroke:#aaa;
  stroke-width:2;
}

.borne{
  fill:#111;
  stroke:#fff;
  stroke-width:2;
  cursor:pointer;
}

.borne:hover{ fill:#3498db }

.fio{
  stroke:#f1c40f;
  stroke-width:5;
}
</style>
</head>

<body>

<h1>Laboratório Virtual – Montagem de Circuitos</h1>

<svg id="painel" width="420" height="520">

  <!-- DISJUNTOR -->
  <rect x="120" y="30" width="180" height="60" rx="10" class="componente"/>
  <text x="210" y="65" text-anchor="middle">DISJUNTOR</text>
  <circle cx="210" cy="90" r="6" class="borne"/>

  <!-- CONTATOR -->
  <rect x="120" y="130" width="180" height="60" rx="10" class="componente"/>
  <text x="210" y="165" text-anchor="middle">CONTATOR</text>
  <circle cx="210" cy="130" r="6" class="borne"/>
  <circle cx="210" cy="190" r="6" class="borne"/>

  <!-- TEMPORIZADOR -->
  <rect x="120" y="250" width="180" height="60" rx="10" class="componente"/>
  <text x="210" y="285" text-anchor="middle">TEMPORIZADOR</text>
  <circle cx="210" cy="250" r="6" class="borne"/>
  <circle cx="210" cy="310" r="6" class="borne"/>

  <!-- MOTOR -->
  <rect x="120" y="370" width="180" height="60" rx="10" class="componente"/>
  <text x="210" y="405" text-anchor="middle">MOTOR</text>
  <circle cx="210" cy="370" r="6" class="borne"/>

</svg>

<script>
const svg = document.getElementById("painel");
let fioAtual = null;
let origem = null;

svg.addEventListener("mousedown", e => {
  if(e.target.classList.contains("borne")){
    origem = e.target;
    fioAtual = document.createElementNS("http://www.w3.org/2000/svg","line");
    fioAtual.setAttribute("x1", origem.cx.baseVal.value);
    fioAtual.setAttribute("y1", origem.cy.baseVal.value);
    fioAtual.setAttribute("x2", origem.cx.baseVal.value);
    fioAtual.setAttribute("y2", origem.cy.baseVal.value);
    fioAtual.setAttribute("class","fio");
    svg.appendChild(fioAtual);
  }
});

svg.addEventListener("mousemove", e => {
  if(fioAtual){
    const pt = svg.createSVGPoint();
    pt.x = e.clientX;
    pt.y = e.clientY;
    const pos = pt.matrixTransform(svg.getScreenCTM().inverse());
    fioAtual.setAttribute("x2", pos.x);
    fioAtual.setAttribute("y2", pos.y);
  }
});

svg.addEventListener("mouseup", e => {
  if(fioAtual){
    if(e.target.classList.contains("borne") && e.target !== origem){
      fioAtual.setAttribute("x2", e.target.cx.baseVal.value);
      fioAtual.setAttribute("y2", e.target.cy.baseVal.value);
    } else {
      fioAtual.remove();
    }
    fioAtual = null;
    origem = null;
  }
});
</script>

</body>
</html>
